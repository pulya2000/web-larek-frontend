# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура приложения
В проекте используется разновидность MV-архитектуры - MVP (Model-View-Presenter).

В коде приложения выделяются три слоя:
- Model
Модель отвечает за бизнес-логику приложения, управление данными и операции с данными,
такие как загрузка, сохранение и изменение данных. Модель не зависит от пользовательского интерфейса
и не содержит логику отображения, что делает ее переиспользуемой в различных интерфейсах.

- View
Представление (отображение) отвечает за отображение данных пользователю и взаимодействие с пользователем.
Оно получает данные, которые необходимо отобразить, от Presenter'а и просто реализует логику
их визуализации, без ведения каких-либо операций над данными.

- Presenter
Представитель действует как промежуточный слой между Моделью и Представлением.
Он реагирует на действия пользователя, вызовы из View, извлекает данные из Model и обрабатывает их
(например, может подготовить данные или преобразовать их в удобный для отображения формат).
После этого Presenter передает данные обратно в View.
Также Presenter отвечает за реализацию логики навигации между экранами или разделами приложения.

MVP-архитектура позволяет не связывать между собой модель и отображение. При этом представитель
использует и то, и другое, чтобы организовать работу между ними.

## Базовый код

### Класс EventEmitter
Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков
о наступлении события. Класс имеет конструктор, который инициализирует события.
Методы класса:
- on - подписка на событие
- off - отписка от события
- emit - уведомление подписчиков о наступлении события
- onAll - подписка на все события
- offAll - сброс всех подписчиков
- trigger - генерация заданного события с заданными аргументами

### Класс API
Отвечает за работу с сервером, реализует отправку и получение запросов. Служит оберткой для упрощения и стандартизации отправки запросов и обработки ответов API.
Конструктор класса:
- baseUrl - базовый URL внешнего API
- options - опции для конфигурации запросов
Методы класса:
- handleResponse - обрабатывает ответ от API
- get - отправка 'GET'-запроса на сервер
- post - отправка 'POST'-запроса на сервер

### Класс WebLarekAPI
Наследуется от класса API. Предназначен для получения данных с сервера и отправки заказа пользователя. Реализуется на основе интерфейса IWebLarekAPI.
Методы класса:
- getProducts - получает от сервера список продуктов 
- getProductById - получает от сервера данные конкретного продукта по его id
- postOrder - отправляет на сервер заказ 


### Класс Product
Содержит в себе все данные о продукте. Реализуется на основе интерфейса IProduct.
Поля класса:
- id - идентификатор
- title - заголовок
- image - ссылка на изображение
- category - категория
- price - цена
- description - подробное описание

### Класс Basket
Отображает список выбранных пользователем товаром, с возможностью их удаления из корзины, а также итоговую стоимость продуктов в корзине. Реализуется на основе интерфейса IBasket.
Методы класса:
- addToBasket - добавление продукта в корзину
- removeFromBasket - удаление продукта из корзины
- clearBasket - очистить корзину
- getTotalPrice - получить общую стоимость продуктов

### Абстрактные классы
### Класс Component
Используется в качестве основы для компонентов проекта, работающих с DOM-элементами.
Конструктор класса:
- constructor - принимает DOM-элемент, который служит контейнером или корневым элементом для конкретного компонента.
Методы класса:
- render - отрисовка компонентов
- setHidden - скрывает элемент
- setVisible - делает элемент видимым
- setDisabled - меняет состояние атрибута disabled у инпутов, делает элемент неактивным
- setText - устанавливает текстовое содержимое заданного HTML элемента
- setImage - устанавливает атрибуты src и alt для HTML элемента изображения
- toggleClass - добавляет или удаляет CSS класс у заданного HTML элемента

### Класс Model
Используется для управления данными и получения состояния модели, уведомляет об ее изменениях.
Конструктор класса:
- constructor - принимает начальные данные и параметры
Методы класса:
- onChange - уведомляет об изменении модели

## Компоненты модели данных
### Класс AppState
Наследуется от базового класса Model. Содержит в себе все данные и логику работы с ними.
Описывает глобальное состояние. Содержит все данные и список всех действий других компонентов.

## Компоненты представления
Свойства и методы классов, их связи с другими компонентами представлены подробнее на UML-схеме.

### Класс MainPage
Отображает главную страницу приложения с корзиной и каталогом товаров. Наследуется от базового класса Component. 

### Класс ItemsList
Используется в различных частях приложения в качестве обертки для каталога карточек (на главноей странице), списка товаров (в корзине), полей формы и пр.

### Класс ProductCard
Используется в качестве обертки для компонента Product. 

### Класс ModalContainer
Используется в качестве обертки для компонента Modal. Отвечает за открытие и закрытие модальных окон в проекте.

### Класс Modal
Используется в качетве обертки для отображения различных компонентов: карточки товара, формы с выбором способа доставки и авторизации пользователя, сообщения об успешно созданном заказе.

### Класс Basket
Отображает список выбранных пользователем товаром, с возможностью их удаления из корзины, а также итоговую сумму.

### Класс Form
Используется в качестве обертки для списка FormField. Отображает поля для ввода данных пользователя, адреса доставки и кнопку отправки заказа. 

### Класс FormField
Отображает поля для ввода информации и ее валидации. 

### Класс Success
Отображает тектовое сообщение об успешной отправке заказа и итоговой сумме списания.